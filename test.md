# 需求评估功能接口文档

## 一、Webhook 接口

- **URL**: `https://n8n.bigpei.cn/webhook-test/request`
- **方法**: `POST`
- **请求体**:
  - 文本：JSON 格式
  - 文件：PDF 格式
- **描述**:  
  通过 Webhook 节点接收外部请求，解析数据类型信息，并根据数据类型转发到不同的处理路径。

---

## 二、API 请求示例

### 请求 1：上传 JSON 文本

- **URL**: `https://n8n.bigpei.cn/webhook-test/request`
- **方法**: `POST`
- **请求体**:
  - **请求体参数说明**：
    | 参数名 | 必填 | 说明             |
    | ------ | ---- | ---------------- |
    | text   | 是   | 需求文档的内容文本 |
    
  ```json
  {
    "text": "需求文档的内容"
  }
  ```
- **响应**:
  - **响应参数说明**：
    | 参数名             | 必填 | 说明                                               |
    | ------------------ | ---- | -------------------------------------------------- |
    | score              | 是   | 总评分，0-100分                                    |
    | dimensions         | 是   | 评估维度列表，每个维度包含名称、分数和依据         |
    | dimensions.name    | 是   | 维度名称（如需求与问题定义、功能设计与用户价值等） |
    | dimensions.score   | 是   | 该维度评分                                         |
    | dimensions.basis   | 是   | 评分依据，字符串数组                               |
    | recommendation     | 是   | 综合建议                                           |
  ```json
  {
    "score": 85,
    "dimensions": [
      {
        "name": "需求与问题定义",
        "score": 92,
        "basis": [
          "用户访谈覆盖15个核心场景，痛点识别完整度达95%",
          "BRD文档通过全部干系人评审"
        ]
      },
      {
        "name": "功能设计与用户价值",
        "score": 82,
        "basis": [
          "原型测试完成3轮迭代，NPS值提升27%",
          "核心功能ROI预估达1:4.3"
        ]
      },
      {
        "name": "市场竞争力",
        "score": 88,
        "basis": [
          "竞品分析报告显示3项差异化优势",
          "目标市场容量预估$2.5B"
        ]
      },
      {
        "name": "实施可行性",
        "score": 76,
        "basis": [
          "技术验证完成POC阶段，关键路径通过率83%",
          "资源缺口：需2名Go开发（现有团队5人）"
        ]
      },
      {
        "name": "非功能性需求",
        "score": 91,
        "basis": [
          "压力测试：单节点并发量达1500TPS",
          "安全审计发现0个高危漏洞"
        ]
      }
    ],
    "recommendation": "建议立项（商业模型通过财务验证，种子用户预约量超预期200%）"
  }
  ```

---

### 请求 2：上传 markdown 文件

- **URL**: `https://n8n.bigpei.cn/webhook-test/request`
- **方法**: `POST`
- **请求体**:
- Body 类型：`multipart/form-data`
  - 参数：
    - file: 选择本地文件（如：需求文档.md）
  - **参数说明**：
    | 参数   | 示例值           | 必填 | 说明                                 |
    |--------|------------------|------|--------------------------------------|
    | file  | 需求文档.md等    | 是   | 本地待上传的markdown文件              | 
  ```
- **响应**:
  - **响应参数说明**：
    | 参数名             | 必填 | 说明                                               |
    | ------------------ | ---- | -------------------------------------------------- |
    | score              | 是   | 总评分，0-100分                                    |
    | dimensions         | 是   | 评估维度列表，每个维度包含名称、分数和依据         |
    | dimensions.name    | 是   | 维度名称（如需求与问题定义、功能设计与用户价值等） |
    | dimensions.score   | 是   | 该维度评分                                         |
    | dimensions.basis   | 是   | 评分依据，字符串数组                               |
    | recommendation     | 是   | 综合建议                                           |
  ```json
  {
    "score": 85,
    "dimensions": [
      {
        "name": "需求与问题定义",
        "score": 92,
        "basis": [
          "用户访谈覆盖15个核心场景，痛点识别完整度达95%",
          "BRD文档通过全部干系人评审"
        ]
      },
      {
        "name": "功能设计与用户价值",
        "score": 82,
        "basis": [
          "原型测试完成3轮迭代，NPS值提升27%",
          "核心功能ROI预估达1:4.3"
        ]
      },
      {
        "name": "市场竞争力",
        "score": 88,
        "basis": [
          "竞品分析报告显示3项差异化优势",
          "目标市场容量预估$2.5B"
        ]
      },
      {
        "name": "实施可行性",
        "score": 76,
        "basis": [
          "技术验证完成POC阶段，关键路径通过率83%",
          "资源缺口：需2名Go开发（现有团队5人）"
        ]
      },
      {
        "name": "非功能性需求",
        "score": 91,
        "basis": [
          "压力测试：单节点并发量达1500TPS",
          "安全审计发现0个高危漏洞"
        ]
      }
    ],
    "recommendation": "建议立项（商业模型通过财务验证，种子用户预约量超预期200%）"
  }
  ```

---

### 请求 3：上传 PDF 文件

- **URL**: `https://n8n.bigpei.cn/webhook-test/request`
- **方法**: `POST`
- **请求体**:
  - Body 类型：`multipart/form-data`
  - 参数：
    - file: 选择本地文件（如：需求文档.pdf）
  - **参数说明**：
    | 参数   | 示例值           | 必填 | 说明                                 |
    |--------|------------------|------|--------------------------------------|
    | file  | 需求文档.pdf等   | 是   | 本地待上传的PDF文件                   |

- **响应**:

  - 成功：
    - **响应参数说明**：
      | 参数名             | 必填 | 说明                                               |
      | ------------------ | ---- | -------------------------------------------------- |
      | score              | 是   | 总评分，0-100分                                    |
      | dimensions         | 是   | 评估维度列表，每个维度包含名称、分数和依据         |
      | dimensions.name    | 是   | 维度名称（如需求与问题定义、功能设计与用户价值等） |
      | dimensions.score   | 是   | 该维度评分                                         |
      | dimensions.basis   | 是   | 评分依据，字符串数组                               |
      | recommendation     | 是   | 综合建议                                           |
    ```json
    {
      "score": 85,
      "dimensions": [
        {
          "name": "需求与问题定义",
          "score": 12,
          "basis": [
            "用户访谈覆盖15个核心场景，痛点识别完整度达95%",
            "BRD文档通过全部干系人评审"
          ]
        },
        {
          "name": "功能设计与用户价值",
          "score": 20,
          "basis": [
            "原型测试完成3轮迭代，NPS值提升27%",
            "核心功能ROI预估达1:4.3"
          ]
        },
        {
          "name": "市场竞争力",
          "score": 16,
          "basis": [
            "竞品分析报告显示3项差异化优势",
            "目标市场容量预估$2.5B"
          ]
        },
        {
          "name": "实施可行性",
          "score": 15,
          "basis": [
            "技术验证完成POC阶段，关键路径通过率83%",
            "资源缺口：需2名Go开发（现有团队5人）"
          ]
        },
        {
          "name": "非功能性需求",
          "score": 13,
          "basis": [
            "压力测试：单节点并发量达1500TPS",
            "安全审计发现0个高危漏洞"
          ]
        }
      ],
      "recommendation": "建议立项（商业模型通过财务验证，种子用户预约量超预期200%）"
    }
    ```

  - 错误（文件大小超过 10MB）：
    - **错误响应参数说明**：
      | 参数名 | 必填 | 说明                         |
      | ------ | ---- | ---------------------------- |
      | error  | 是   | 错误信息，如文件过大等提示内容 |
    ```json
    {
      "error": "Unable to parse document. Please ensure file is less than 10mb."
    }
    ``` 
